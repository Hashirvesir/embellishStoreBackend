"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[9497],{51399:function(W,E,t){var e=t(32735),n=t(33229);const h=()=>{const{changeLocale:M,localeNames:L,messages:S}=(0,e.useContext)(n.Z);return{changeLocale:M,localeNames:L,messages:S}};E.Z=h},94987:function(W,E,t){t.r(E),t.d(E,{ProfilePage:function(){return me}});var e=t(32735),n=t(94638),h=t(27649),M=t(82055),L=t(17e3),S=t(41415),m=t(72850),w=t(87933),r=t(19565),I=t(66456),A=t(92802),T=t(74758),a=t(67879),d=t(20108),p=t(51399),g=t(63465),f=t(35663),P=t(10369),D=t(63642),b=t(49372),U=t(15335),y=t(5803),K=t(54894),Q=t(60492),ae=t(60216),s=t.n(ae),V=t(8471);const k=(0,V.ZP)(P.o)`
  ::-ms-reveal {
    display: none;
  }
`,$=(0,V.ZP)(D.E)`
  svg {
    height: ${(0,r.Q1)(16)};
    width: ${(0,r.Q1)(16)};
    path {
      fill: ${({theme:o})=>o.colors.neutral600};
    }
  }
`,G=({errors:o,onChange:v,values:x})=>{const{formatMessage:u}=(0,a.Z)(),[l,F]=(0,e.useState)(!1),[i,N]=(0,e.useState)(!1),[H,J]=(0,e.useState)(!1);return e.createElement(m.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(w.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(b.Z,{variant:"delta",as:"h2"},u({id:"global.change-password",defaultMessage:"Change password"})),e.createElement(U.r,{gap:5},e.createElement(y.P,{s:12,col:6},e.createElement(P.o,{error:o.currentPassword?u({id:o.currentPassword,defaultMessage:o.currentPassword}):"",onChange:v,value:x.currentPassword,label:u({id:"Auth.form.currentPassword.label",defaultMessage:"Current Password"}),name:"currentPassword",type:l?"text":"password",endAction:e.createElement($,{onClick:R=>{R.stopPropagation(),F(O=>!O)},label:u(l?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},l?e.createElement(K.Z,null):e.createElement(Q.Z,null))}))),e.createElement(U.r,{gap:5},e.createElement(y.P,{s:12,col:6},e.createElement(k,{error:o.password?u({id:o.password,defaultMessage:o.password}):"",onChange:v,value:x.password,label:u({id:"global.password",defaultMessage:"Password"}),name:"password",type:i?"text":"password",autoComplete:"new-password",endAction:e.createElement($,{onClick:R=>{R.stopPropagation(),N(O=>!O)},label:u(i?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},i?e.createElement(K.Z,null):e.createElement(Q.Z,null))})),e.createElement(y.P,{s:12,col:6},e.createElement(k,{error:o.confirmPassword?u({id:o.confirmPassword,defaultMessage:o.confirmPassword}):"",onChange:v,value:x.confirmPassword,label:u({id:"Auth.form.confirmPassword.label",defaultMessage:"Password confirmation"}),name:"confirmPassword",type:H?"text":"password",autoComplete:"new-password",endAction:e.createElement($,{onClick:R=>{R.stopPropagation(),J(O=>!O)},label:u(H?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},H?e.createElement(K.Z,null):e.createElement(Q.Z,null))})))))};G.propTypes={errors:s().shape({currentPassword:s().string,password:s().string,confirmPassword:s().string}),onChange:s().func,values:s().shape({currentPassword:s().string,password:s().string,confirmPassword:s().string})},G.defaultProps={errors:{},onChange(){},values:{currentPassword:"",password:"",confirmPassword:""}};var ne=G,q=t(68465),_=t(84967),se=t(23940),re=t.n(se);const Y=({onChange:o,values:v,localeNames:x,allApplicationThemes:u})=>{const{formatMessage:l}=(0,a.Z)(),F=Object.keys(u).filter(i=>u[i]);return e.createElement(m.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(w.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(w.k,{direction:"column",alignItems:"stretch",gap:1},e.createElement(b.Z,{variant:"delta",as:"h2"},l({id:"Settings.profile.form.section.experience.title",defaultMessage:"Experience"})),e.createElement(b.Z,null,l({id:"Settings.profile.form.section.experience.interfaceLanguageHelp",defaultMessage:"Preference changes will apply only to you. More information is available {here}."},{here:e.createElement(m.x,{as:"a",color:"primary600",target:"_blank",rel:"noopener noreferrer",href:"https://docs.strapi.io/developer-docs/latest/development/admin-customization.html#locales"},l({id:"Settings.profile.form.section.experience.here",defaultMessage:"here"}))}))),e.createElement(U.r,{gap:5},e.createElement(y.P,{s:12,col:6},e.createElement(q.P,{label:l({id:"Settings.profile.form.section.experience.interfaceLanguage",defaultMessage:"Interface language"}),placeholder:l({id:"global.select",defaultMessage:"Select"}),hint:l({id:"Settings.profile.form.section.experience.interfaceLanguage.hint",defaultMessage:"This will only display your own interface in the chosen language."}),onClear:()=>{o({target:{name:"preferedLanguage",value:null}})},clearLabel:l({id:"Settings.profile.form.section.experience.clear.select",defaultMessage:"Clear the interface language selected"}),value:v.preferedLanguage,onChange:i=>{o({target:{name:"preferedLanguage",value:i}})}},Object.entries(x).map(([i,N])=>e.createElement(_.W,{value:i,key:i},N)))),e.createElement(y.P,{s:12,col:6},e.createElement(q.P,{label:l({id:"Settings.profile.form.section.experience.mode.label",defaultMessage:"Interface mode"}),placeholder:l({id:"components.Select.placeholder",defaultMessage:"Select"}),hint:l({id:"Settings.profile.form.section.experience.mode.hint",defaultMessage:"Displays your interface in the chosen mode."}),value:v.currentTheme,onChange:i=>{o({target:{name:"currentTheme",value:i}})}},F.map(i=>e.createElement(_.W,{value:i,key:i},l({id:"Settings.profile.form.section.experience.mode.option-label",defaultMessage:"{name} mode"},{name:l({id:i,defaultMessage:re()(i)})}))))))))};Y.propTypes={allApplicationThemes:s().object,onChange:s().func,values:s().shape({preferedLanguage:s().string,currentTheme:s().string}),localeNames:s().object},Y.defaultProps={allApplicationThemes:{},onChange(){},values:{preferedLanguage:null,currentTheme:""},localeNames:{}};var oe=Y;const X=({errors:o,onChange:v,values:x})=>{const{formatMessage:u}=(0,a.Z)();return e.createElement(m.x,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(w.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(b.Z,{variant:"delta",as:"h2"},u({id:"global.profile",defaultMessage:"Profile"})),e.createElement(U.r,{gap:5},e.createElement(y.P,{s:12,col:6},e.createElement(r.jm,{intlLabel:{id:"Auth.form.firstname.label",defaultMessage:"First name"},error:o.firstname,onChange:v,value:x.firstname,type:"text",name:"firstname",required:!0})),e.createElement(y.P,{s:12,col:6},e.createElement(r.jm,{intlLabel:{id:"Auth.form.lastname.label",defaultMessage:"Last name"},error:o.lastname,onChange:v,value:x.lastname,type:"text",name:"lastname"})),e.createElement(y.P,{s:12,col:6},e.createElement(r.jm,{intlLabel:{id:"Auth.form.email.label",defaultMessage:"Email"},error:o.email,onChange:v,value:x.email,type:"email",name:"email",required:!0})),e.createElement(y.P,{s:12,col:6},e.createElement(r.jm,{intlLabel:{id:"Auth.form.username.label",defaultMessage:"Username"},error:o.username,onChange:v,value:x.username,type:"text",name:"username"})))))};X.propTypes={errors:s().shape({firstname:s().string,lastname:s().string,username:s().string,email:s().string}),onChange:s().func,values:s().shape({firstname:s().string,lastname:s().string,username:s().string,email:s().string})},X.defaultProps={errors:{},onChange(){},values:{firstname:"",lastname:"",username:"",email:""}};var le=X,ie=t(24346),de=t(32720),ce=ie.Ry().shape(de.Rw);const me=()=>{const{changeLocale:o,localeNames:v}=(0,p.Z)(),{setUserDisplayName:x}=(0,r.L7)(),u=(0,d.useQueryClient)(),{formatMessage:l}=(0,a.Z)(),{trackUsage:F}=(0,r.rS)(),i=(0,r.lm)(),{lockApp:N,unlockApp:H}=(0,r.o1)(),{notifyStatus:J}=(0,n.G)(),{currentTheme:R,themes:O,onChangeTheme:ue}=(0,g.M1)(),{get:ee,put:ge}=(0,r.kY)();(0,r.go)();const{isLoading:fe,data:z}=(0,d.useQuery)("user",async()=>{const{data:c}=await ee("/admin/users/me");return c.data},{onSuccess(){J(l({id:"Settings.profile.form.notify.data.loaded",defaultMessage:"Your profile data has been loaded"}))},onError(){i({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),{isLoading:pe,data:he}=(0,d.useQuery)(["providers","isSSOLocked"],async()=>{const{data:{data:c}}=await ee("/admin/providers/isSSOLocked");return c},{enabled:window.strapi.isEE&&window.strapi.features.isEnabled("sso"),onError(){i({type:"warning",message:{id:"Settings.permissions.users.sso.provider.error"}})}}),ve=fe||pe,te=(0,d.useMutation)(async c=>{const{confirmPassword:j,currentTheme:C,...B}=c,{data:Z}=await ge("/admin/users/me",B);return{...Z.data,currentTheme:c.currentTheme}},{async onSuccess(c){await u.invalidateQueries("user");const{email:j,firstname:C,lastname:B,username:Z,preferedLanguage:Ae}=c;r.I8.setUserInfo({email:j,firstname:C,lastname:B,username:Z,preferedLanguage:Ae});const Te=c.username||(0,f.P)(c.firstname,c.lastname);x(Te),o(c.preferedLanguage),ue(c.currentTheme),F("didChangeMode",{newMode:c.currentTheme}),i({type:"success",message:{id:"notification.success.saved",defaultMessage:"Saved"}})},onSettled(){H()},refetchActive:!0}),{isLoading:Ee}=te,we=async(c,{setErrors:j})=>{N();const C=c.username||null;te.mutate({...c,username:C},{onError(B){const Z=B?.response?.data;return Z?.data?j(Z.data):i({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})};if(ve)return e.createElement(h.o,{"aria-busy":"true"},e.createElement(T.q,{title:l({id:"Settings.profile.form.section.helmet.title",defaultMessage:"User profile"})}),e.createElement(M.T,{title:l({id:"Settings.profile.form.section.profile.page.title",defaultMessage:"Profile page"})}),e.createElement(L.D,null,e.createElement(r.dO,null)));const Pe=he?.isSSOLocked??!1,{email:ye,firstname:xe,lastname:Me,username:Le,preferedLanguage:Se}=z,Ie={email:ye,firstname:xe,lastname:Me,username:Le,preferedLanguage:Se,currentTheme:R};return e.createElement(h.o,{"aria-busy":Ee},e.createElement(T.q,{title:l({id:"Settings.profile.form.section.helmet.title",defaultMessage:"User profile"})}),e.createElement(A.J9,{onSubmit:we,initialValues:Ie,validateOnChange:!1,validationSchema:ce,enableReinitialize:!0},({errors:c,values:j,handleChange:C,isSubmitting:B,dirty:Z})=>e.createElement(r.l0,null,e.createElement(M.T,{title:z.username||(0,f.P)(z.firstname,z.lastname),primaryAction:e.createElement(S.z,{startIcon:e.createElement(I.Z,null),loading:B,type:"submit",disabled:!Z},l({id:"global.save",defaultMessage:"Save"}))}),e.createElement(m.x,{paddingBottom:10},e.createElement(L.D,null,e.createElement(w.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(le,{errors:c,onChange:C,values:j}),!Pe&&e.createElement(ne,{errors:c,onChange:C,values:j}),e.createElement(oe,{allApplicationThemes:O,onChange:C,values:j,localeNames:v})))))))}},32720:function(W,E,t){t.d(E,{YM:function(){return r},Rw:function(){return L}});var e=t(24346),n=t(19565);const h={firstname:e.Z_().trim().required(n.I0.required),lastname:e.Z_(),email:e.Z_().email(n.I0.email).lowercase().required(n.I0.required),username:e.Z_().nullable(),password:e.Z_().min(8,n.I0.minLength).matches(/[a-z]/,"components.Input.error.contain.lowercase").matches(/[A-Z]/,"components.Input.error.contain.uppercase").matches(/\d/,"components.Input.error.contain.number"),confirmPassword:e.Z_().min(8,n.I0.minLength).oneOf([e.iH("password"),null],"components.Input.error.password.noMatch").when("password",(I,A)=>I?A.required(n.I0.required):A)};var L={...h,currentPassword:e.Z_().when(["password","confirmPassword"],(I,A,T)=>I||A?T.required(n.I0.required):T),preferedLanguage:e.Z_().nullable()},m={roles:e.IX().min(1,n.I0.required).required(n.I0.required)},r=e.Ry().shape({...h,isActive:e.Xg(),...m})},17e3:function(W,E,t){t.d(E,{D:function(){return h}});var e=t(74512),n=t(72850);const h=({children:M})=>(0,e.jsx)(n.x,{paddingLeft:10,paddingRight:10,children:M})},82055:function(W,E,t){t.d(E,{T:function(){return I}});var e=t(74512),n=t(32735),h=t(8471);const M=a=>{const d=(0,n.useRef)(null),[p,g]=(0,n.useState)(!0),f=([P])=>{g(P.isIntersecting)};return(0,n.useEffect)(()=>{const P=d.current,D=new IntersectionObserver(f,a);return P&&D.observe(d.current),()=>{P&&D.disconnect()}},[d,a]),[d,p]};var L=t(81957);const S=(a,d)=>{const p=(0,L.W)(d);(0,n.useLayoutEffect)(()=>{const g=new ResizeObserver(p);return Array.isArray(a)?a.forEach(f=>{f.current&&g.observe(f.current)}):a.current&&g.observe(a.current),()=>{g.disconnect()}},[a,p])};var m=t(72850),w=t(87933),r=t(49372);const I=a=>{const d=(0,n.useRef)(null),[p,g]=(0,n.useState)(null),[f,P]=M({root:null,rootMargin:"0px",threshold:0});return S(f,()=>{f.current&&g(f.current.getBoundingClientRect())}),(0,n.useEffect)(()=>{d.current&&g(d.current.getBoundingClientRect())},[d]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:p?.height},ref:f,children:P&&(0,e.jsx)(T,{ref:d,...a})}),!P&&(0,e.jsx)(T,{...a,sticky:!0,width:p?.width})]})};I.displayName="HeaderLayout";const A=(0,h.ZP)(m.x)`
  width: ${({width:a})=>a?`${a/16}rem`:void 0};
  z-index: ${({theme:a})=>a.zIndices[1]};
`,T=n.forwardRef(({navigationAction:a,primaryAction:d,secondaryAction:p,subtitle:g,title:f,sticky:P,width:D,...b},U)=>{const y=typeof g=="string";return P?(0,e.jsx)(A,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:D,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(w.k,{justifyContent:"space-between",children:[(0,e.jsxs)(w.k,{children:[a&&(0,e.jsx)(m.x,{paddingRight:3,children:a}),(0,e.jsxs)(m.x,{children:[(0,e.jsx)(r.Z,{variant:"beta",as:"h1",...b,children:f}),y?(0,e.jsx)(r.Z,{variant:"pi",textColor:"neutral600",children:g}):g]}),p?(0,e.jsx)(m.x,{paddingLeft:4,children:p}):null]}),(0,e.jsx)(w.k,{children:d?(0,e.jsx)(m.x,{paddingLeft:2,children:d}):void 0})]})}):(0,e.jsxs)(m.x,{ref:U,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:a?6:8,background:"neutral100","data-strapi-header":!0,children:[a?(0,e.jsx)(m.x,{paddingBottom:2,children:a}):null,(0,e.jsxs)(w.k,{justifyContent:"space-between",children:[(0,e.jsxs)(w.k,{minWidth:0,children:[(0,e.jsx)(r.Z,{as:"h1",variant:"alpha",...b,children:f}),p?(0,e.jsx)(m.x,{paddingLeft:4,children:p}):null]}),d]}),y?(0,e.jsx)(r.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:g}):g]})})},27649:function(W,E,t){t.d(E,{o:function(){return L}});var e=t(74512),n=t(8471),h=t(72850);const M=(0,n.ZP)(h.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,L=({labelledBy:S="main-content-title",...m})=>(0,e.jsx)(M,{"aria-labelledby":S,as:"main",id:"main-content",tabIndex:-1,...m})}}]);
