"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[5516],{99097:function(A,b,t){var e=t(32735);const m=(y,k)=>{const[B,h]=(0,e.useState)(y);return(0,e.useEffect)(()=>{const E=setTimeout(()=>{h(y)},k);return()=>{clearTimeout(E)}},[y,k]),B};b.Z=m},95018:function(A,b,t){t.r(b),t.d(b,{MarketPlacePage:function(){return ke},default:function(){return xt}});var e=t(32735),m=t(96709),y=t(27649),k=t(17e3),B=t(91215),h=t(87933),E=t(90980),p=t(72850),F=t(61774),V=t(3653),g=t(19565),U=t(74758),o=t(67879),x=t(15062),C=t(99097),S=()=>{const n=typeof navigator<"u"&&typeof navigator.onLine=="boolean"?navigator.onLine:!0,[s,i]=(0,e.useState)(n),l=()=>i(!0),r=()=>i(!1);return(0,e.useEffect)(()=>(window.addEventListener("online",l),window.addEventListener("offline",r),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",r)}),[]),s},j=t(30305),T=t(99140),L=t(74512);const Y=n=>(0,L.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 32 32",...n,children:[(0,L.jsx)("path",{fill:"#AC73E6",d:"M0 4a4 4 0 0 1 4-4h24a4 4 0 0 1 4 4v24a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4Z"}),(0,L.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M15.027 13.839c-3.19-.836-6.305-1.064-10.18-.608-1.215.152-1.063 1.975.076 2.203.304.836.456 2.355.912 3.267.987 2.279 5.622 1.975 7.369.835 1.14-.683 1.443-2.279 1.9-3.494.227-.684 1.595-.684 1.822 0 .38 1.215.76 2.81 1.9 3.494 1.747 1.14 6.381 1.444 7.369-.835.456-.912.607-2.431.911-3.267 1.14-.228 1.216-2.051.076-2.203-3.874-.456-6.989-.228-10.18.608-.455.075-1.519.075-1.975 0Z",clipRule:"evenodd"})]}),H=Y;var le=t(47361),Te=()=>{const{formatMessage:n}=(0,o.Z)(),{trackUsage:s}=(0,g.rS)();return e.createElement("a",{href:"https://strapi.canny.io/plugin-requests",target:"_blank",rel:"noopener noreferrer nofollow",style:{textDecoration:"none"},onClick:()=>s("didMissMarketplacePlugin")},e.createElement(g.Y_,{title:n({id:"admin.pages.MarketPlacePage.missingPlugin.title",defaultMessage:"Documentation"}),subtitle:n({id:"admin.pages.MarketPlacePage.missingPlugin.description",defaultMessage:"Tell us what plugin you are looking for and we'll let our community plugin developers know in case they are in search for inspiration!"}),icon:e.createElement(H,null),iconBackground:"alternative100",endAction:e.createElement(T.J,{as:le.Z,color:"neutral600",width:3,height:3,marginLeft:2})}))},je=t(66995),X=t(41415),we=t(35331),Ze=t(5644),De=t(60216),a=t.n(De),$=t(8471),Be=t(5383),oe=t(68465),ce=t(84967);const de=({message:n,value:s,onChange:i,possibleFilters:l,onClear:r,customizeContent:u})=>{const c=(d,v)=>`${d} (${v})`;return e.createElement(oe.P,{"data-testid":`${n}-button`,label:n,placeholder:n,size:"M",onChange:i,onClear:r,value:s,customizeContent:u,multi:!0},Object.entries(l).map(([d,v])=>e.createElement(ce.W,{"data-testid":`${d}-${v}`,key:d,value:d},c(d,v))))};de.propTypes={message:a().string.isRequired,value:a().array.isRequired,onChange:a().func.isRequired,possibleFilters:a().object.isRequired,onClear:a().func.isRequired,customizeContent:a().func.isRequired};var ue=de;const ge=({source:n,onToggle:s,query:i,npmPackageType:l,possibleCategories:r,possibleCollections:u,handleSelectChange:c,handleSelectClear:d})=>{const{formatMessage:v}=(0,o.Z)();return e.createElement(Be.J2,{source:n,onDismiss:s,padding:3,spacing:4},e.createElement(Oe,{direction:"column",alignItems:"stretch",gap:1},e.createElement(ue,{message:v({id:"admin.pages.MarketPlacePage.filters.collections",defaultMessage:"Collections"}),value:i?.collections||[],onChange:P=>{c({collections:P})},onClear:()=>d("collections"),possibleFilters:u,customizeContent:P=>v({id:"admin.pages.MarketPlacePage.filters.collectionsSelected",defaultMessage:"{count, plural, =0 {No collections} one {# collection} other {# collections}} selected"},{count:P.length})}),l==="plugin"&&e.createElement(ue,{message:v({id:"admin.pages.MarketPlacePage.filters.categories",defaultMessage:"Categories"}),value:i?.categories||[],onChange:P=>{c({categories:P})},onClear:()=>d("categories"),possibleFilters:r,customizeContent:P=>v({id:"admin.pages.MarketPlacePage.filters.categoriesSelected",defaultMessage:"{count, plural, =0 {No categories} one {# category} other {# categories}} selected"},{count:P.length}),name:"categories"})))};ge.propTypes={onToggle:a().func.isRequired,source:a().shape({current:a().instanceOf(Element)}).isRequired,query:a().object.isRequired,npmPackageType:a().oneOf(["plugin","provider"]).isRequired,possibleCollections:a().object.isRequired,possibleCategories:a().object.isRequired,handleSelectChange:a().func.isRequired,handleSelectClear:a().func.isRequired};var Le=ge;const Oe=(0,$.ZP)(h.k)`
  /* Hide the label, every input needs a label. */
  label {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
  }
`,q=({name:n,handleRemove:s})=>e.createElement(p.x,{padding:1},e.createElement(je.V,{icon:e.createElement(we.Z,null),onClick:s},n)),Ie=(0,$.ZP)(X.z)`
  height: ${({theme:n})=>n.sizes.input.S};
`,pe=({possibleCollections:n,possibleCategories:s,npmPackageType:i,query:l,handleSelectClear:r,handleSelectChange:u})=>{const[c,d]=(0,e.useState)(!1),v=(0,e.useRef)(),{formatMessage:P}=(0,o.Z)(),M=()=>d(f=>!f),w=(f,Z)=>{const I={[Z]:l[Z].filter(z=>z!==f)};u(I)};return e.createElement(e.Fragment,null,e.createElement(p.x,{paddingTop:1,paddingBottom:1},e.createElement(Ie,{variant:"tertiary",ref:v,"data-testid":"filters-button",startIcon:e.createElement(Ze.Z,null),onClick:M,size:"S"},P({id:"app.utils.filters",defaultMessage:"Filters"})),c&&e.createElement(Le,{onToggle:M,source:v,query:l,handleSelectClear:r,handleSelectChange:u,possibleCollections:n,possibleCategories:s,npmPackageType:i})),l.collections?.map(f=>e.createElement(q,{name:f,key:f,handleRemove:()=>w(f,"collections")})),i==="plugin"&&l.categories?.map(f=>e.createElement(q,{name:f,key:f,handleRemove:()=>w(f,"categories")})))};q.propTypes={name:a().string.isRequired,handleRemove:a().func.isRequired},pe.propTypes={npmPackageType:a().oneOf(["plugin","provider"]).isRequired,possibleCollections:a().object.isRequired,possibleCategories:a().object.isRequired,query:a().object.isRequired,handleSelectChange:a().func.isRequired,handleSelectClear:a().func.isRequired};var Ne=pe,Ae=t(23866),$e=t(15335),Fe=t(5803),O=t(49372),Ve=t(54725);const ze=$.ZP.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  grid-gap: ${({theme:n})=>n.spaces[4]};
`,Ue=(0,$.ZP)(p.x)`
  background: ${({theme:n})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${n.colors.neutral150} 100%)`};
  opacity: 0.33;
`,He=()=>e.createElement(ze,null,Array(12).fill(null).map((n,s)=>e.createElement(Ue,{key:`empty-plugin-card-${s}`,height:"234px",hasRadius:!0}))),me=({content:n})=>e.createElement(p.x,{position:"relative","data-testid":"marketplace-results"},e.createElement(He,null),e.createElement(p.x,{position:"absolute",top:11,width:"100%"},e.createElement(h.k,{alignItems:"center",justifyContent:"center",direction:"column"},e.createElement(T.J,{as:Ve.Z,color:"",width:"160px",height:"88px"}),e.createElement(p.x,{paddingTop:6},e.createElement(O.Z,{variant:"delta",as:"p",textColor:"neutral600"},n)))));me.propTypes={content:a().string.isRequired};var We=me,_=t(63919),fe=t(95489),Qe=t(38705),Ge=t(24443),Ke=t.n(Ge),Je=t(47750),Ye=t(66456),he=t(47765),Xe=t(54770),ve=t.n(Xe);const W=({description:n,installMessage:s,disabled:i,handleCopy:l,pluginName:r})=>e.createElement(_.u,{"data-testid":`tooltip-${r}`,description:n},e.createElement(p.x,null,e.createElement(X.z,{size:"S",startIcon:e.createElement(he.Z,null),variant:"secondary",disabled:i,onClick:l},s))),ee=({strapiPeerDepVersion:n,strapiAppVersion:s,handleCopy:i,pluginName:l})=>{const{formatMessage:r}=(0,o.Z)(),u=ve().validRange(n),c=ve().satisfies(s,u),d=r({id:"admin.pages.MarketPlacePage.plugin.copy",defaultMessage:"Copy install command"});if(s){if(!u)return e.createElement(W,{installMessage:d,pluginName:l,description:r({id:"admin.pages.MarketPlacePage.plugin.version.null",defaultMessage:'Unable to verify compatibility with your Strapi version: "{strapiAppVersion}"'},{strapiAppVersion:s}),handleCopy:i});if(!c)return e.createElement(W,{installMessage:d,pluginName:l,description:r({id:"admin.pages.MarketPlacePage.plugin.version",defaultMessage:'Update your Strapi version: "{strapiAppVersion}" to: "{versionRange}"'},{strapiAppVersion:s,versionRange:u}),disabled:!0})}return e.createElement(X.z,{size:"S",startIcon:e.createElement(he.Z,null),variant:"secondary",onClick:i},d)};W.defaultProps={disabled:!1,handleCopy:null},W.propTypes={description:a().string.isRequired,installMessage:a().string.isRequired,disabled:a().bool,handleCopy:a().func,pluginName:a().string.isRequired},ee.defaultProps={strapiAppVersion:null,strapiPeerDepVersion:null},ee.propTypes={strapiAppVersion:a().string,strapiPeerDepVersion:a().string,handleCopy:a().func.isRequired,pluginName:a().string.isRequired};var qe=ee;const te=({isInstalled:n,isInDevelopmentMode:s,commandToCopy:i,strapiAppVersion:l,strapiPeerDepVersion:r,pluginName:u})=>{const c=(0,g.lm)(),{formatMessage:d}=(0,o.Z)(),{trackUsage:v}=(0,g.rS)(),{copy:P}=(0,g.VP)(),M=async()=>{await P(i)&&(v("willInstallPlugin"),c({type:"success",message:{id:"admin.pages.MarketPlacePage.plugin.copy.success"}}))};return n?e.createElement(p.x,{paddingLeft:4},e.createElement(T.J,{as:Ye.Z,marginRight:2,width:12,height:12,color:"success600"}),e.createElement(O.Z,{variant:"omega",textColor:"success600",fontWeight:"bold"},d({id:"admin.pages.MarketPlacePage.plugin.installed",defaultMessage:"Installed"}))):s?e.createElement(qe,{strapiAppVersion:l,strapiPeerDepVersion:r,handleCopy:M,pluginName:u}):null};te.defaultProps={strapiAppVersion:null,strapiPeerDepVersion:null},te.propTypes={isInstalled:a().bool.isRequired,isInDevelopmentMode:a().bool.isRequired,commandToCopy:a().string.isRequired,strapiAppVersion:a().string,strapiPeerDepVersion:a().string,pluginName:a().string.isRequired};var _e=te,et=t(9026),tt=t(33904),at=t(4511),nt=t(33844);const st=(0,$.ZP)(et.i)`
  width: ${(0,g.Q1)(12)};
  transform: rotate(90deg);
`,ae=({githubStars:n,npmDownloads:s,npmPackageType:i})=>{const{formatMessage:l}=(0,o.Z)();return e.createElement(h.k,{gap:1},!!n&&e.createElement(e.Fragment,null,e.createElement(T.J,{as:tt.Z,height:(0,g.Q1)(12),width:(0,g.Q1)(12),"aria-hidden":!0}),e.createElement(T.J,{as:at.Z,height:(0,g.Q1)(12),width:(0,g.Q1)(12),color:"warning500","aria-hidden":!0}),e.createElement("p",{"aria-label":l({id:`admin.pages.MarketPlacePage.${i}.githubStars`,defaultMessage:"This {package} was starred {starsCount} on GitHub"},{starsCount:n,package:i})},e.createElement(O.Z,{variant:"pi",textColor:"neutral800"},n)),e.createElement(st,{unsetMargin:!1,background:"neutral200"})),e.createElement(T.J,{as:nt.Z,height:(0,g.Q1)(12),width:(0,g.Q1)(12),"aria-hidden":!0}),e.createElement("p",{"aria-label":l({id:`admin.pages.MarketPlacePage.${i}.downloads`,defaultMessage:"This {package} has {downloadsCount} weekly downloads"},{downloadsCount:s,package:i})},e.createElement(O.Z,{variant:"pi",textColor:"neutral800"},s)))};ae.defaultProps={githubStars:0,npmDownloads:0},ae.propTypes={githubStars:a().number,npmDownloads:a().number,npmPackageType:a().string.isRequired};var rt=ae;const it=(0,$.ZP)(O.Z)`
  /* stylelint-disable value-no-vendor-prefix, property-no-vendor-prefix */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  /* stylelint-enable value-no-vendor-prefix, property-no-vendor-prefix */
  overflow: hidden;
`,ne=({npmPackage:n,isInstalled:s,useYarn:i,isInDevelopmentMode:l,npmPackageType:r,strapiAppVersion:u})=>{const{attributes:c}=n,{formatMessage:d}=(0,o.Z)(),{trackUsage:v}=(0,g.rS)(),P=i?`yarn add ${c.npmPackageName}`:`npm install ${c.npmPackageName}`,M=d({id:"admin.pages.MarketPlacePage.plugin.tooltip.madeByStrapi",defaultMessage:"Made by Strapi"}),w=`https://market.strapi.io/${Ke().plural(r)}/${c.slug}`;return e.createElement(h.k,{direction:"column",justifyContent:"space-between",paddingTop:4,paddingRight:4,paddingBottom:4,paddingLeft:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",height:"100%",alignItems:"normal","data-testid":"npm-package-card"},e.createElement(p.x,null,e.createElement(h.k,{direction:"row",justifyContent:"space-between",alignItems:"flex-start"},e.createElement(p.x,{as:"img",src:c.logo.url,alt:`${c.name} logo`,hasRadius:!0,width:11,height:11}),e.createElement(rt,{githubStars:c.githubStars,npmDownloads:c.npmDownloads,npmPackageType:r})),e.createElement(p.x,{paddingTop:4},e.createElement(O.Z,{as:"h3",variant:"delta"},e.createElement(h.k,{alignItems:"center"},c.name,c.validated&&!c.madeByStrapi&&e.createElement(_.u,{description:d({id:"admin.pages.MarketPlacePage.plugin.tooltip.verified",defaultMessage:"Plugin verified by Strapi"})},e.createElement(h.k,null,e.createElement(T.J,{as:Qe.Z,marginLeft:2,color:"success600"}))),c.madeByStrapi&&e.createElement(_.u,{description:M},e.createElement(h.k,null,e.createElement(p.x,{as:"img",src:Je,alt:M,marginLeft:1,width:6,height:"auto"})))))),e.createElement(p.x,{paddingTop:2},e.createElement(it,{as:"p",variant:"omega",textColor:"neutral600"},c.description))),e.createElement(h.k,{gap:2,style:{alignSelf:"flex-end"},paddingTop:6},e.createElement(fe.Q,{size:"S",href:w,isExternal:!0,endIcon:e.createElement(le.Z,null),"aria-label":d({id:"admin.pages.MarketPlacePage.plugin.info.label",defaultMessage:"Learn more about {pluginName}"},{pluginName:c.name}),variant:"tertiary",onClick:()=>v("didPluginLearnMore")},d({id:"admin.pages.MarketPlacePage.plugin.info.text",defaultMessage:"More"})),e.createElement(_e,{isInstalled:s,isInDevelopmentMode:l,commandToCopy:P,strapiAppVersion:u,strapiPeerDepVersion:c.strapiVersion,pluginName:c.name})))};ne.defaultProps={isInDevelopmentMode:!1,strapiAppVersion:null},ne.propTypes={npmPackage:a().shape({id:a().string.isRequired,attributes:a().shape({name:a().string.isRequired,description:a().string.isRequired,slug:a().string.isRequired,npmPackageName:a().string.isRequired,npmPackageUrl:a().string.isRequired,repositoryUrl:a().string.isRequired,logo:a().object.isRequired,developerName:a().string.isRequired,validated:a().bool.isRequired,madeByStrapi:a().bool.isRequired,strapiCompatibility:a().oneOf(["v3","v4"]),strapiVersion:a().string,githubStars:a().number,npmDownloads:a().number}).isRequired}).isRequired,isInstalled:a().bool.isRequired,useYarn:a().bool.isRequired,isInDevelopmentMode:a().bool,npmPackageType:a().string.isRequired,strapiAppVersion:a().string};var lt=ne;const se=({status:n,npmPackages:s,installedPackageNames:i,useYarn:l,isInDevelopmentMode:r,npmPackageType:u,strapiAppVersion:c,debouncedSearch:d})=>{const{formatMessage:v}=(0,o.Z)();if(n==="error")return e.createElement(h.k,{paddingTop:8},e.createElement(g.Hn,null));if(n==="loading")return e.createElement(h.k,{justifyContent:"center",paddingTop:8},e.createElement(Ae.a,null,"Loading content..."));const P=v({id:"admin.pages.MarketPlacePage.search.empty",defaultMessage:'No result for "{target}"'},{target:d});return s.length===0?e.createElement(We,{content:P}):e.createElement($e.r,{gap:4,"data-testid":"marketplace-results"},s.map(M=>e.createElement(Fe.P,{col:4,s:6,xs:12,style:{height:"100%"},key:M.id},e.createElement(lt,{npmPackage:M,isInstalled:i.includes(M.attributes.npmPackageName),useYarn:l,isInDevelopmentMode:r,npmPackageType:u,strapiAppVersion:c}))))};se.defaultProps={npmPackages:[],installedPackageNames:[],strapiAppVersion:null,debouncedSearch:""},se.propTypes={status:a().string.isRequired,npmPackages:a().array,installedPackageNames:a().arrayOf(a().string),useYarn:a().bool.isRequired,isInDevelopmentMode:a().bool.isRequired,npmPackageType:a().string.isRequired,strapiAppVersion:a().string,debouncedSearch:a().string};var Pe=se;const Ee=({pagination:n})=>e.createElement(p.x,{paddingTop:4},e.createElement(h.k,{alignItems:"flex-end",justifyContent:"space-between"},e.createElement(g.v4,{options:["12","24","50","100"],defaultValue:"24"}),e.createElement(g.tU,{pagination:n})));Ee.propTypes={pagination:a().shape({page:a().number.isRequired,pageCount:a().number.isRequired,pageSize:a().number.isRequired,total:a().number.isRequired}).isRequired};var ot=Ee,ct=t.p+"9d5d788027e86620c234.svg",dt=t(82055);const ut=n=>(0,L.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 25",...n,children:(0,L.jsx)("path",{fill:"#212134",fillRule:"evenodd",d:"M13.571 18.272H10.43v-8.47H2.487a.2.2 0 0 1-.14-.343L11.858.058a.2.2 0 0 1 .282 0l9.513 9.4a.2.2 0 0 1-.14.343H13.57v8.47ZM2.2 21.095a.2.2 0 0 0-.2.2v2.424c0 .11.09.2.2.2h19.6a.2.2 0 0 0 .2-.2v-2.424a.2.2 0 0 0-.2-.2H2.2Z",clipRule:"evenodd"})}),gt=ut,re=({isOnline:n,npmPackageType:s})=>{const{formatMessage:i}=(0,o.Z)(),{trackUsage:l}=(0,g.rS)(),r=s==="provider"?"didSubmitProvider":"didSubmitPlugin";return e.createElement(dt.T,{title:i({id:"global.marketplace",defaultMessage:"Marketplace"}),subtitle:i({id:"admin.pages.MarketPlacePage.subtitle",defaultMessage:"Get more out of Strapi"}),primaryAction:n&&e.createElement(fe.Q,{startIcon:e.createElement(gt,null),variant:"tertiary",href:`https://market.strapi.io/submit-${s}`,onClick:()=>l(r),isExternal:!0},i({id:`admin.pages.MarketPlacePage.submit.${s}.link`,defaultMessage:`Submit ${s}`}))})};var Me=re;re.defaultProps={npmPackageType:"plugin"},re.propTypes={isOnline:a().bool.isRequired,npmPackageType:a().string};var pt=()=>{const{formatMessage:n}=(0,o.Z)();return e.createElement(m.A,null,e.createElement(y.o,null,e.createElement(Me,{isOnline:!1}),e.createElement(h.k,{width:"100%",direction:"column",alignItems:"center",justifyContent:"center",paddingTop:(0,g.Q1)(120)},e.createElement(p.x,{paddingBottom:2},e.createElement(O.Z,{textColor:"neutral700",variant:"alpha"},n({id:"admin.pages.MarketPlacePage.offline.title",defaultMessage:"You are offline"}))),e.createElement(p.x,{paddingBottom:6},e.createElement(O.Z,{textColor:"neutral700",variant:"epsilon"},n({id:"admin.pages.MarketPlacePage.offline.subtitle",defaultMessage:"You need to be connected to the Internet to access Strapi Market."}))),e.createElement("img",{src:ct,alt:"offline",style:{width:"88px",height:"88px"}}))))};const mt=(0,$.ZP)(p.x)`
  font-weight: ${({theme:n})=>n.fontWeights.semiBold};

  span {
    font-size: ${({theme:n})=>n.fontSizes[1]};
  }

  /* Hide the label, every input needs a label. */
  label {
    border: 0;
    clip: rect(0 0 0 0);
    height: 1px;
    margin: -1px;
    overflow: hidden;
    padding: 0;
    position: absolute;
    width: 1px;
  }
`,ye=({sortQuery:n,handleSelectChange:s})=>{const{formatMessage:i}=(0,o.Z)(),l={"name:asc":{selected:{id:"admin.pages.MarketPlacePage.sort.alphabetical.selected",defaultMessage:"Sort by alphabetical order"},option:{id:"admin.pages.MarketPlacePage.sort.alphabetical",defaultMessage:"Alphabetical order"}},"submissionDate:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.newest.selected",defaultMessage:"Sort by newest"},option:{id:"admin.pages.MarketPlacePage.sort.newest",defaultMessage:"Newest"}},"githubStars:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.githubStars.selected",defaultMessage:"Sort by GitHub stars"},option:{id:"admin.pages.MarketPlacePage.sort.githubStars",defaultMessage:"Number of GitHub stars"}},"npmDownloads:desc":{selected:{id:"admin.pages.MarketPlacePage.sort.npmDownloads.selected",defaultMessage:"Sort by npm downloads"},option:{id:"admin.pages.MarketPlacePage.sort.npmDownloads",defaultMessage:"Number of downloads"}}};return e.createElement(mt,null,e.createElement(oe.P,{size:"S",id:"sort-by-select",value:n,customizeContent:()=>i(l[n].selected),onChange:r=>{s({sort:r})},label:i({id:"admin.pages.MarketPlacePage.sort.label",defaultMessage:"Sort by"})},Object.entries(l).map(([r,u])=>e.createElement(ce.W,{key:r,value:r},i(u.option)))))};ye.propTypes={sortQuery:a().string.isRequired,handleSelectChange:a().func.isRequired};var ft=ye,ht=t(94638),vt=t(33348),Q=t.n(vt),xe=t(20108);const be="https://market-api.strapi.io",Pt=(n,s={})=>{const i=(0,g.lm)();return(0,xe.useQuery)(["marketplace","plugins",s],async()=>{try{const l=Q().stringify(Q().parse(s)),r=await fetch(`${be}/plugins?${l}`);if(!r.ok)throw new Error("Failed to fetch marketplace plugins.");return await r.json()}catch{}return null},{onSuccess(){n&&n()},onError(){i({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})},Et=(n,s={})=>{const i=(0,g.lm)();return(0,xe.useQuery)(["marketplace","providers",s],async()=>{try{const l=Q().stringify(Q().parse(s)),r=await fetch(`${be}/providers?${l}`);if(!r.ok)throw new Error("Failed to fetch marketplace providers.");return await r.json()}catch{}return null},{onSuccess(){n&&n()},onError(){i({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})};function Mt({npmPackageType:n,debouncedSearch:s,query:i,tabQuery:l}){const{notifyStatus:r}=(0,ht.G)(),{formatMessage:u}=(0,o.Z)(),c=u({id:"global.marketplace",defaultMessage:"Marketplace"}),d=()=>{r(u({id:"app.utils.notify.data-loaded",defaultMessage:"The {target} has loaded"},{target:c}))},v={page:i?.page||1,pageSize:i?.pageSize||24},{data:P,status:M}=Pt(d,{...l.plugin,pagination:v,search:s}),{data:w,status:f}=Et(d,{...l.provider,pagination:v,search:s}),Z=n==="plugin"?P:w,I=n==="plugin"?M:f,[z,G]=(0,e.useState)({}),[K,J]=(0,e.useState)({});(0,e.useEffect)(()=>{I==="success"&&G(Z.meta.collections),M==="success"&&J(P.meta.categories)},[P?.meta.categories,M,Z?.meta.collections,I]);const{pagination:ie}=I==="success"?Z.meta:{};return{pluginsResponse:P,providersResponse:w,pluginsStatus:M,providersStatus:f,possibleCollections:z,possibleCategories:K,pagination:ie}}var yt=Mt;const ke=()=>{const{formatMessage:n}=(0,o.Z)(),{trackUsage:s}=(0,g.rS)(),i=(0,e.useRef)(s),l=(0,g.lm)(),[{query:r},u]=(0,g.Kx)(),c=(0,C.Z)(r?.search,500)||"",{autoReload:d,dependencies:v,useYarn:P,strapiVersion:M}=(0,g.L7)(),w=S(),f=r?.npmPackageType||"plugin",[Z,I]=(0,e.useState)({plugin:f==="plugin"?{...r}:{},provider:f==="provider"?{...r}:{}});(0,g.go)(),(0,e.useEffect)(()=>{i.current("didGoToMarketplace")},[]),(0,e.useEffect)(()=>{d||l({type:"info",message:{id:"admin.pages.MarketPlacePage.production",defaultMessage:"Manage plugins from the development environment"}})},[l,d]);const{pluginsResponse:z,providersResponse:G,pluginsStatus:K,providersStatus:J,possibleCollections:ie,possibleCategories:bt,pagination:Re}=yt({npmPackageType:f,debouncedSearch:c,query:r,tabQuery:Z});if(!w)return e.createElement(pt,null);const kt=N=>{const D=N===0?"plugin":"provider",Ct=Z[D]&&Object.keys(Z[D]).length;u(Ct?{...Z[D],search:r?.search||"",npmPackageType:D,page:1}:{npmPackageType:D,collections:[],categories:[],sort:"name:asc",page:1,search:r?.search||""})},Ce=N=>{u({...N,page:1}),I(D=>({...D,[f]:{...D[f],...N}}))},Rt=N=>{u({[N]:[],page:null},"remove"),I(D=>({...D,[f]:{}}))},Se=Object.keys(v);return e.createElement(m.A,null,e.createElement(y.o,null,e.createElement(U.q,{title:n({id:"admin.pages.MarketPlacePage.helmet",defaultMessage:"Marketplace - Plugins"})}),e.createElement(Me,{isOnline:w,npmPackageType:f}),e.createElement(k.D,null,e.createElement(B.v,{label:n({id:"admin.pages.MarketPlacePage.tab-group.label",defaultMessage:"Plugins and Providers for Strapi"}),id:"tabs",variant:"simple",initialSelectedTabIndex:["plugin","provider"].indexOf(f),onTabChange:kt},e.createElement(h.k,{justifyContent:"space-between",paddingBottom:4},e.createElement(E.m,null,e.createElement(E.O,null,n({id:"admin.pages.MarketPlacePage.plugins",defaultMessage:"Plugins"})," ",K==="success"?`(${z.meta.pagination.total})`:"..."),e.createElement(E.O,null,n({id:"admin.pages.MarketPlacePage.providers",defaultMessage:"Providers"})," ",J==="success"?`(${G.meta.pagination.total})`:"...")),e.createElement(p.x,{width:"25%"},e.createElement(F.w,{name:"searchbar",onClear:()=>u({search:"",page:1}),value:r?.search,onChange:N=>u({search:N.target.value,page:1}),clearLabel:n({id:"admin.pages.MarketPlacePage.search.clear",defaultMessage:"Clear the search"}),placeholder:n({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"})},n({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"})))),e.createElement(h.k,{paddingBottom:4,gap:2},e.createElement(ft,{sortQuery:r?.sort||"name:asc",handleSelectChange:Ce}),e.createElement(Ne,{npmPackageType:f,possibleCollections:ie,possibleCategories:bt,query:r||{},handleSelectChange:Ce,handleSelectClear:Rt})),e.createElement(V.n,null,e.createElement(V.x,null,e.createElement(Pe,{npmPackages:z?.data,status:K,installedPackageNames:Se,useYarn:P,isInDevelopmentMode:d,npmPackageType:"plugin",strapiAppVersion:M,debouncedSearch:c})),e.createElement(V.x,null,e.createElement(Pe,{npmPackages:G?.data,status:J,installedPackageNames:Se,useYarn:P,isInDevelopmentMode:d,npmPackageType:"provider",debouncedSearch:c})))),Re&&e.createElement(ot,{pagination:Re}),e.createElement(p.x,{paddingTop:8},e.createElement(Te,null)))))};var xt=()=>{const n=(0,x.v9)(j._);return e.createElement(g.O4,{permissions:n.marketplace.main},e.createElement(ke,null))}},17e3:function(A,b,t){t.d(b,{D:function(){return y}});var e=t(74512),m=t(72850);const y=({children:k})=>(0,e.jsx)(m.x,{paddingLeft:10,paddingRight:10,children:k})},82055:function(A,b,t){t.d(b,{T:function(){return V}});var e=t(74512),m=t(32735),y=t(8471);const k=o=>{const x=(0,m.useRef)(null),[C,R]=(0,m.useState)(!0),S=([j])=>{R(j.isIntersecting)};return(0,m.useEffect)(()=>{const j=x.current,T=new IntersectionObserver(S,o);return j&&T.observe(x.current),()=>{j&&T.disconnect()}},[x,o]),[x,C]};var B=t(81957);const h=(o,x)=>{const C=(0,B.W)(x);(0,m.useLayoutEffect)(()=>{const R=new ResizeObserver(C);return Array.isArray(o)?o.forEach(S=>{S.current&&R.observe(S.current)}):o.current&&R.observe(o.current),()=>{R.disconnect()}},[o,C])};var E=t(72850),p=t(87933),F=t(49372);const V=o=>{const x=(0,m.useRef)(null),[C,R]=(0,m.useState)(null),[S,j]=k({root:null,rootMargin:"0px",threshold:0});return h(S,()=>{S.current&&R(S.current.getBoundingClientRect())}),(0,m.useEffect)(()=>{x.current&&R(x.current.getBoundingClientRect())},[x]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:C?.height},ref:S,children:j&&(0,e.jsx)(U,{ref:x,...o})}),!j&&(0,e.jsx)(U,{...o,sticky:!0,width:C?.width})]})};V.displayName="HeaderLayout";const g=(0,y.ZP)(E.x)`
  width: ${({width:o})=>o?`${o/16}rem`:void 0};
  z-index: ${({theme:o})=>o.zIndices[1]};
`,U=m.forwardRef(({navigationAction:o,primaryAction:x,secondaryAction:C,subtitle:R,title:S,sticky:j,width:T,...L},Y)=>{const H=typeof R=="string";return j?(0,e.jsx)(g,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:T,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(p.k,{justifyContent:"space-between",children:[(0,e.jsxs)(p.k,{children:[o&&(0,e.jsx)(E.x,{paddingRight:3,children:o}),(0,e.jsxs)(E.x,{children:[(0,e.jsx)(F.Z,{variant:"beta",as:"h1",...L,children:S}),H?(0,e.jsx)(F.Z,{variant:"pi",textColor:"neutral600",children:R}):R]}),C?(0,e.jsx)(E.x,{paddingLeft:4,children:C}):null]}),(0,e.jsx)(p.k,{children:x?(0,e.jsx)(E.x,{paddingLeft:2,children:x}):void 0})]})}):(0,e.jsxs)(E.x,{ref:Y,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:o?6:8,background:"neutral100","data-strapi-header":!0,children:[o?(0,e.jsx)(E.x,{paddingBottom:2,children:o}):null,(0,e.jsxs)(p.k,{justifyContent:"space-between",children:[(0,e.jsxs)(p.k,{minWidth:0,children:[(0,e.jsx)(F.Z,{as:"h1",variant:"alpha",...L,children:S}),C?(0,e.jsx)(E.x,{paddingLeft:4,children:C}):null]}),x]}),H?(0,e.jsx)(F.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:R}):R]})})},96709:function(A,b,t){t.d(b,{A:function(){return h}});var e=t(74512),m=t(8471),y=t(72850);const k=(0,m.ZP)(y.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:E})=>E?"auto 1fr":"1fr"};
`,B=(0,m.ZP)(y.x)`
  overflow-x: hidden;
`,h=({sideNav:E,children:p})=>(0,e.jsxs)(k,{hasSideNav:!!E,children:[E,(0,e.jsx)(B,{paddingBottom:10,children:p})]})},27649:function(A,b,t){t.d(b,{o:function(){return B}});var e=t(74512),m=t(8471),y=t(72850);const k=(0,m.ZP)(y.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,B=({labelledBy:h="main-content-title",...E})=>(0,e.jsx)(k,{"aria-labelledby":h,as:"main",id:"main-content",tabIndex:-1,...E})},33904:function(A,b,t){t.d(b,{Z:function(){return y}});var e=t(74512);const m=k=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...k,children:(0,e.jsx)("path",{fill:"#161614",d:"M12 0C5.373 0 0 5.501 0 12.288c0 5.43 3.438 10.035 8.206 11.66.6.114.82-.266.82-.59 0-.294-.01-1.262-.016-2.289-3.338.744-4.043-1.45-4.043-1.45-.546-1.42-1.332-1.797-1.332-1.797-1.089-.763.082-.747.082-.747 1.205.086 1.84 1.266 1.84 1.266 1.07 1.878 2.807 1.335 3.491 1.021.108-.794.42-1.336.762-1.643-2.665-.31-5.467-1.364-5.467-6.073 0-1.341.469-2.437 1.236-3.298-.124-.31-.535-1.56.117-3.252 0 0 1.007-.33 3.3 1.26A11.25 11.25 0 0 1 12 5.942c1.02.005 2.047.141 3.006.414 2.29-1.59 3.297-1.26 3.297-1.26.653 1.693.242 2.943.118 3.252.77.86 1.235 1.957 1.235 3.298 0 4.72-2.808 5.76-5.48 6.063.43.382.814 1.13.814 2.276 0 1.644-.014 2.967-.014 3.372 0 .327.216.71.825.59C20.566 22.32 24 17.715 24 12.288 24 5.501 18.627 0 12 0Z"})}),y=m},4511:function(A,b,t){t.d(b,{Z:function(){return y}});var e=t(74512);const m=k=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...k,children:(0,e.jsx)("path",{fill:"#212134",d:"m12 18.26-7.053 3.948 1.575-7.928L.587 8.792l8.027-.952L12 .5l3.386 7.34 8.027.952-5.935 5.488 1.575 7.928L12 18.26Z"})}),y=m}}]);
