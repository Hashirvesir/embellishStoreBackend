"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[8826],{51399:function(Q,M,t){var e=t(32735),a=t(33229);const w=()=>{const{changeLocale:P,localeNames:y,messages:T}=(0,e.useContext)(a.Z);return{changeLocale:P,localeNames:y,messages:T}};M.Z=w},73678:function(Q,M,t){var e=t(32735),a=t(8471),w=t(63465);const P=a.ZP.img`
  height: ${72/16}rem;
`,y=()=>{const{logos:{auth:T}}=(0,w.um)();return e.createElement(P,{src:T?.custom??T.default,"aria-hidden":!0,alt:""})};M.Z=y},11060:function(Q,M,t){t.d(M,{sg:function(){return ae},bU:function(){return H},ZP:function(){return se}});var e=t(32735),a=t(72850),w=t(87933),P=t(60216),y=t.n(P),T=t(8471),b=t(77035),te=t(67879),z=t(51399),u=()=>{const{changeLocale:i,localeNames:q}=(0,z.Z)(),{locale:J}=(0,te.Z)();return e.createElement(b.q4,{value:J,onChange:n=>i(n)},Object.entries(q).map(([n,S])=>e.createElement(b.ag,{key:n,value:n},S)))};const j=(0,T.ZP)(a.x)`
  margin: 0 auto;
  width: 552px;
`,ae=(0,T.ZP)(w.k)`
  flex-direction: column;
`,H=({children:i})=>e.createElement(j,{shadow:"tableShadow",hasRadius:!0,paddingTop:9,paddingBottom:9,paddingLeft:10,paddingRight:10,background:"neutral0",justifyContent:"center"},i);H.propTypes={children:y().node.isRequired};const G=({children:i})=>e.createElement("div",null,e.createElement(w.k,{as:"header",justifyContent:"flex-end"},e.createElement(a.x,{paddingTop:6,paddingRight:8},e.createElement(u,null))),e.createElement(a.x,{paddingTop:2,paddingBottom:11},i));G.propTypes={children:y().node.isRequired};var se=G},24018:function(Q,M,t){var e=t(63642),a=t(8471);const w=(0,a.ZP)(e.E)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:P})=>P.colors.neutral600};
    }
  }
`;M.Z=w},24436:function(Q,M,t){var e=t(32735),a=t(10369),w=t(27649),P=t(72850),y=t(49372),T=t(87933),b=t(8284),te=t(41415),z=t(19565),ie=t(54894),u=t(60492),j=t(92802),ae=t(60216),H=t.n(ae),G=t(67879),se=t(8471),i=t(73678),q=t(11060),J=t(24018);const n=(0,se.ZP)(a.o)`
  ::-ms-reveal {
    display: none;
  }
`,S=({onSubmit:I,schema:A,children:L})=>{const[B,ne]=(0,e.useState)(!1),{formatMessage:v}=(0,G.Z)();return e.createElement(w.o,null,e.createElement(q.bU,null,e.createElement(j.J9,{enableReinitialize:!0,initialValues:{email:"",password:"",rememberMe:!1},onSubmit:I,validationSchema:A,validateOnChange:!1},({values:V,errors:R,handleChange:X})=>e.createElement(z.l0,{noValidate:!0},e.createElement(q.sg,null,e.createElement(i.Z,null),e.createElement(P.x,{paddingTop:6,paddingBottom:1},e.createElement(y.Z,{variant:"alpha",as:"h1"},v({id:"Auth.form.welcome.title",defaultMessage:"Welcome!"}))),e.createElement(P.x,{paddingBottom:7},e.createElement(y.Z,{variant:"epsilon",textColor:"neutral600"},v({id:"Auth.form.welcome.subtitle",defaultMessage:"Log in to your Strapi account"}))),R.errorMessage&&e.createElement(y.Z,{id:"global-form-error",role:"alert",tabIndex:-1,textColor:"danger600"},R.errorMessage)),e.createElement(T.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(a.o,{error:R.email?v({id:R.email,defaultMessage:"This value is required."}):"",value:V.email,onChange:X,label:v({id:"Auth.form.email.label",defaultMessage:"Email"}),placeholder:v({id:"Auth.form.email.placeholder",defaultMessage:"kai@doe.com"}),name:"email",required:!0}),e.createElement(n,{error:R.password?v({id:R.password,defaultMessage:"This value is required."}):"",onChange:X,value:V.password,label:v({id:"global.password",defaultMessage:"Password"}),name:"password",type:B?"text":"password",endAction:e.createElement(J.Z,{onClick:re=>{re.stopPropagation(),ne(Me=>!Me)},label:v(B?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},B?e.createElement(ie.Z,null):e.createElement(u.Z,null)),required:!0}),e.createElement(b.X,{onValueChange:re=>{X({target:{value:re,name:"rememberMe"}})},value:V.rememberMe,"aria-label":"rememberMe",name:"rememberMe"},v({id:"Auth.form.rememberMe.label",defaultMessage:"Remember me"})),e.createElement(te.z,{fullWidth:!0,type:"submit"},v({id:"Auth.form.button.login",defaultMessage:"Login"}))))),L),e.createElement(T.k,{justifyContent:"center"},e.createElement(P.x,{paddingTop:4},e.createElement(z.rU,{to:"/auth/forgot-password"},v({id:"Auth.link.forgot-password",defaultMessage:"Forgot your password?"})))))};S.defaultProps={children:null,onSubmit(){}},S.propTypes={children:H().node,onSubmit:H().func,schema:H().shape({type:H().string.isRequired}).isRequired},M.Z=S},27129:function(Q,M,t){t.r(M),t.d(M,{AuthPage:function(){return ge}});var e=t(32735),a=t(19565),w=t(84306),P=t(39935),y=t.n(P),T=t(33795),b=t.n(T),te=t(9086),z=t.n(te),ie=t(60216),u=t.n(ie),j=t(53038),ae=t(96030),H=t(51399),G=t(9592),se=t(5074),i=t(11060),q=t(24436);const J=s=>e.createElement(i.ZP,null,e.createElement(q.Z,{...s}));J.defaultProps={onSubmit:s=>s.preventDefault()},J.propTypes={onSubmit:u().func};var n=t(24346),S=t(27649),I=t(72850),A=t(49372),L=t(87933),B=t(10369),ne=t(41415),v=t(92802),V=t(67879),R=t(73678);const X=({onSubmit:s,schema:E})=>{const{formatMessage:r}=(0,V.Z)();return e.createElement(i.ZP,null,e.createElement(S.o,null,e.createElement(i.bU,null,e.createElement(v.J9,{enableReinitialize:!0,initialValues:{email:""},onSubmit:s,validationSchema:E,validateOnChange:!1},({values:$,errors:U,handleChange:Y})=>e.createElement(a.l0,{noValidate:!0},e.createElement(i.sg,null,e.createElement(R.Z,null),e.createElement(I.x,{paddingTop:6,paddingBottom:7},e.createElement(A.Z,{as:"h1",variant:"alpha"},r({id:"Auth.form.button.password-recovery",defaultMessage:"Password Recovery"}))),U.errorMessage&&e.createElement(A.Z,{id:"global-form-error",role:"alert",tabIndex:-1,textColor:"danger600"},r({id:U.errorMessage,defaultMessage:"An error occurred"}))),e.createElement(L.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(B.o,{error:U.email?r({id:U.email,defaultMessage:"This email is invalid."}):"",value:$.email,onChange:Y,label:r({id:"Auth.form.email.label",defaultMessage:"Email"}),placeholder:r({id:"Auth.form.email.placeholder",defaultMessage:"kai@doe.com"}),name:"email",required:!0}),e.createElement(ne.z,{type:"submit",fullWidth:!0},r({id:"Auth.form.button.forgot-password",defaultMessage:"Send Email"})))))),e.createElement(L.k,{justifyContent:"center"},e.createElement(I.x,{paddingTop:4},e.createElement(a.rU,{to:"/auth/login"},r({id:"Auth.link.ready",defaultMessage:"Ready to sign in?"}))))))};X.defaultProps={onSubmit:s=>s.preventDefault()},X.propTypes={onSubmit:u().func,schema:u().shape({type:u().string.isRequired}).isRequired};var re=X,De=()=>{const{formatMessage:s}=(0,V.Z)();return e.createElement(i.ZP,null,e.createElement(S.o,null,e.createElement(i.bU,null,e.createElement(i.sg,null,e.createElement(R.Z,null),e.createElement(I.x,{paddingTop:6,paddingBottom:7},e.createElement(A.Z,{as:"h1",variant:"alpha"},s({id:"app.containers.AuthPage.ForgotPasswordSuccess.title",defaultMessage:"Email sent"}))),e.createElement(A.Z,null,s({id:"app.containers.AuthPage.ForgotPasswordSuccess.text.email",defaultMessage:"It can take a few minutes to receive your password recovery link."})),e.createElement(I.x,{paddingTop:4},e.createElement(A.Z,null,s({id:"app.containers.AuthPage.ForgotPasswordSuccess.text.contact-admin",defaultMessage:"If you do not receive this link, please contact your administrator."}))))),e.createElement(L.k,{justifyContent:"center"},e.createElement(I.x,{paddingTop:4},e.createElement(a.rU,{to:"/auth/login"},s({id:"Auth.link.signin",defaultMessage:"Sign in"}))))))},Se=()=>{const{formatMessage:s}=(0,V.Z)(),r=(0,a.aM)().get("info")||s({id:"Auth.components.Oops.text",defaultMessage:"Your account has been suspended."});return e.createElement(i.ZP,null,e.createElement(S.o,null,e.createElement(i.bU,null,e.createElement(i.sg,null,e.createElement(R.Z,null),e.createElement(I.x,{paddingTop:6,paddingBottom:7},e.createElement(A.Z,{as:"h1",variant:"alpha"},s({id:"Auth.components.Oops.title",defaultMessage:"Oops..."}))),e.createElement(A.Z,null,r),e.createElement(I.x,{paddingTop:4},e.createElement(A.Z,null,s({id:"Auth.components.Oops.text.admin",defaultMessage:"If this is a mistake, please contact your administrator."}))))),e.createElement(L.k,{justifyContent:"center"},e.createElement(I.x,{paddingTop:4},e.createElement(a.rU,{to:"/auth/login"},s({id:"Auth.link.signin",defaultMessage:"Sign in"}))))))},Le=t(15335),we=t(5803),Ue=t(8284),de=t(54894),me=t(60492),ue=t(8471),ce=t(24018);const ye=ue.ZP.a`
  color: ${({theme:s})=>s.colors.primary600};
`,Te=(0,ue.ZP)(B.o)`
  ::-ms-reveal {
    display: none;
  }
`,pe=({authType:s,fieldsToDisable:E,noSignin:r,onSubmit:$,schema:U})=>{const Y=(0,a.lm)(),{push:g}=(0,j.k6)(),[d,x]=(0,e.useState)(!1),[W,K]=(0,e.useState)(!1),[N,Ee]=(0,e.useState)(0),[oe,_]=(0,e.useState)({}),{trackUsage:Re}=(0,a.rS)(),{formatMessage:o}=(0,V.Z)(),he=(0,a.aM)(),{formatAPIError:Pe}=(0,a.So)(),{get:le}=(0,a.kY)(),k=he.get("registrationToken");(0,e.useEffect)(()=>{k&&(async()=>{try{const{data:{data:l}}=await le("/admin/registration-info",{params:{registrationToken:k}});l&&_(l)}catch(l){const p=Pe(l);Y({type:"warning",message:p}),g(`/auth/oops?info=${encodeURIComponent(p)}`)}})()},[k]);function ve(C){return Object.entries(C).reduce((l,[p,Z])=>{let O=Z;return!["password","confirmPassword"].includes(p)&&typeof Z=="string"&&(O=O.trim(),p==="lastname"&&(O=O||null)),l[p]=O,l},{})}return e.createElement(i.ZP,null,e.createElement(i.bU,null,e.createElement(v.J9,{enableReinitialize:!0,initialValues:{firstname:oe.firstname||"",lastname:oe.lastname||"",email:oe.email||"",password:"",confirmPassword:"",registrationToken:k||void 0,news:!1},onSubmit:async(C,l)=>{const p=ve(C);try{await U.validate(p,{abortEarly:!1}),N>0&&s==="register-admin"&&Re("didSubmitWithErrorsFirstAdmin",{count:N.toString()}),$(k?{userInfo:z()(p,["registrationToken"]),registrationToken:k}:p,l)}catch(Z){const O=(0,a.CJ)(Z);Ee(N+1),l.setErrors(O)}},validateOnChange:!1},({values:C,errors:l,handleChange:p})=>e.createElement(a.l0,{noValidate:!0},e.createElement(S.o,null,e.createElement(L.k,{direction:"column",alignItems:"center",gap:3},e.createElement(R.Z,null),e.createElement(A.Z,{as:"h1",variant:"alpha",textAlign:"center"},o({id:"Auth.form.welcome.title",defaultMessage:"Welcome to Strapi!"})),e.createElement(A.Z,{variant:"epsilon",textColor:"neutral600",textAlign:"center"},o({id:"Auth.form.register.subtitle",defaultMessage:"Credentials are only used to authenticate in Strapi. All saved data will be stored in your database."}))),e.createElement(L.k,{direction:"column",alignItems:"stretch",gap:6,marginTop:7},e.createElement(Le.r,{gap:4},e.createElement(we.P,{col:6},e.createElement(B.o,{name:"firstname",required:!0,value:C.firstname,error:l.firstname?o(l.firstname):void 0,onChange:p,label:o({id:"Auth.form.firstname.label",defaultMessage:"Firstname"})})),e.createElement(we.P,{col:6},e.createElement(B.o,{name:"lastname",value:C.lastname,onChange:p,label:o({id:"Auth.form.lastname.label",defaultMessage:"Lastname"})}))),e.createElement(B.o,{name:"email",disabled:E.includes("email"),value:C.email,onChange:p,error:l.email?o(l.email):void 0,required:!0,label:o({id:"Auth.form.email.label",defaultMessage:"Email"}),type:"email"}),e.createElement(Te,{name:"password",onChange:p,value:C.password,error:l.password?o(l.password):void 0,endAction:e.createElement(ce.Z,{onClick:Z=>{Z.preventDefault(),x(O=>!O)},label:o(d?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},d?e.createElement(de.Z,null):e.createElement(me.Z,null)),hint:o({id:"Auth.form.password.hint",defaultMessage:"Must be at least 8 characters, 1 uppercase, 1 lowercase & 1 number"}),required:!0,label:o({id:"global.password",defaultMessage:"Password"}),type:d?"text":"password"}),e.createElement(Te,{name:"confirmPassword",onChange:p,value:C.confirmPassword,error:l.confirmPassword?o(l.confirmPassword):void 0,endAction:e.createElement(ce.Z,{onClick:Z=>{Z.preventDefault(),K(O=>!O)},label:o(W?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},W?e.createElement(de.Z,null):e.createElement(me.Z,null)),required:!0,label:o({id:"Auth.form.confirmPassword.label",defaultMessage:"Confirm Password"}),type:W?"text":"password"}),e.createElement(Ue.X,{onValueChange:Z=>{p({target:{value:Z,name:"news"}})},value:C.news,name:"news","aria-label":"news"},o({id:"Auth.form.register.news.label",defaultMessage:"Keep me updated about new features & upcoming improvements (by doing this you accept the {terms} and the {policy})."},{terms:e.createElement(ye,{target:"_blank",href:"https://strapi.io/terms",rel:"noreferrer"},o({id:"Auth.privacy-policy-agreement.terms",defaultMessage:"terms"})),policy:e.createElement(ye,{target:"_blank",href:"https://strapi.io/privacy",rel:"noreferrer"},o({id:"Auth.privacy-policy-agreement.policy",defaultMessage:"policy"}))})),e.createElement(ne.z,{fullWidth:!0,size:"L",type:"submit"},o({id:"Auth.form.button.register",defaultMessage:"Let's start"})))))),!r&&e.createElement(I.x,{paddingTop:4},e.createElement(L.k,{justifyContent:"center"},e.createElement(a.rU,{label:"Auth.link.signin",to:"/auth/login"},o({id:"Auth.link.signin.account",defaultMessage:"Already have an account?"}))))))};pe.defaultProps={fieldsToDisable:[],noSignin:!1,onSubmit:s=>s.preventDefault()},pe.propTypes={authType:u().string.isRequired,fieldsToDisable:u().array,noSignin:u().bool,onSubmit:u().func,schema:u().shape({validate:u().func.isRequired,type:u().string.isRequired}).isRequired};var Ae=pe;const Ie=(0,ue.ZP)(B.o)`
  ::-ms-reveal {
    display: none;
  }
`,fe=({onSubmit:s,schema:E})=>{const[r,$]=(0,e.useState)(!1),[U,Y]=(0,e.useState)(!1),{formatMessage:g}=(0,V.Z)();return e.createElement(i.ZP,null,e.createElement(S.o,null,e.createElement(i.bU,null,e.createElement(v.J9,{enableReinitialize:!0,initialValues:{password:"",confirmPassword:""},onSubmit:s,validationSchema:E,validateOnChange:!1},({values:d,errors:x,handleChange:W})=>e.createElement(a.l0,{noValidate:!0},e.createElement(i.sg,null,e.createElement(R.Z,null),e.createElement(I.x,{paddingTop:6,paddingBottom:7},e.createElement(A.Z,{as:"h1",variant:"alpha"},g({id:"global.reset-password",defaultMessage:"Reset password"}))),x.errorMessage&&e.createElement(A.Z,{id:"global-form-error",role:"alert",tabIndex:-1,textColor:"danger600"},g({id:x.errorMessage,defaultMessage:"An error occurred"}))),e.createElement(L.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(Ie,{name:"password",onChange:W,value:d.password,error:x.password?g({id:x.password,defaultMessage:"This field is required."}):void 0,endAction:e.createElement(ce.Z,{onClick:K=>{K.preventDefault(),$(N=>!N)},label:g(r?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},r?e.createElement(de.Z,null):e.createElement(me.Z,null)),hint:g({id:"Auth.form.password.hint",defaultMessage:"Password must contain at least 8 characters, 1 uppercase, 1 lowercase and 1 number"}),required:!0,label:g({id:"global.password",defaultMessage:"Password"}),type:r?"text":"password"}),e.createElement(Ie,{name:"confirmPassword",onChange:W,value:d.confirmPassword,error:x.confirmPassword?g({id:x.confirmPassword,defaultMessage:"This value is required."}):void 0,endAction:e.createElement(ce.Z,{onClick:K=>{K.preventDefault(),Y(N=>!N)},label:g(r?{id:"Auth.form.password.show-password",defaultMessage:"Show password"}:{id:"Auth.form.password.hide-password",defaultMessage:"Hide password"})},U?e.createElement(de.Z,null):e.createElement(me.Z,null)),required:!0,label:g({id:"Auth.form.confirmPassword.label",defaultMessage:"Confirm Password"}),type:U?"text":"password"}),e.createElement(ne.z,{fullwidth:!0,type:"submit"},g({id:"global.change-password",defaultMessage:"Change password"})))))),e.createElement(L.k,{justifyContent:"center"},e.createElement(I.x,{paddingTop:4},e.createElement(a.rU,{to:"/auth/login"},g({id:"Auth.link.ready",defaultMessage:"Ready to sign in?"}))))))};fe.defaultProps={onSubmit:s=>s.preventDefault()},fe.propTypes={onSubmit:u().func,schema:u().shape({type:u().string.isRequired}).isRequired};var xe=fe;const Ce={"forgot-password":{Component:re,endPoint:"forgot-password",fieldsToDisable:[],fieldsToOmit:[],schema:n.Ry().shape({email:n.Z_().email(a.I0.email).required(a.I0.required)}),inputsPrefix:""},"forgot-password-success":{Component:De,endPoint:"",fieldsToDisable:[],fieldsToOmit:[],schema:null,inputsPrefix:""},login:{endPoint:"login",fieldsToDisable:[],fieldsToOmit:["rememberMe"],schema:n.Ry().shape({email:n.Z_().email(a.I0.email).required(a.I0.required),password:n.Z_().required(a.I0.required),rememberMe:n.Xg().nullable()}),inputsPrefix:""},oops:{Component:Se,endPoint:null,fieldsToDisable:[],fieldsToOmit:[],schema:null,inputsPrefix:""},register:{Component:Ae,endPoint:"register",fieldsToDisable:["email"],fieldsToOmit:["userInfo.confirmPassword","userInfo.news","userInfo.email"],schema:n.Ry().shape({firstname:n.Z_().trim().required(a.I0.required),lastname:n.Z_().nullable(),password:n.Z_().min(8,a.I0.minLength).matches(/[a-z]/,"components.Input.error.contain.lowercase").matches(/[A-Z]/,"components.Input.error.contain.uppercase").matches(/\d/,"components.Input.error.contain.number").required(a.I0.required),confirmPassword:n.Z_().oneOf([n.iH("password"),null],"components.Input.error.password.noMatch").required(a.I0.required),registrationToken:n.Z_().required(a.I0.required)}),inputsPrefix:"userInfo."},"register-admin":{Component:Ae,endPoint:"register-admin",noSignin:!0,fieldsToDisable:[],fieldsToOmit:["confirmPassword","news"],schema:n.Ry().shape({firstname:n.Z_().trim().required(a.I0.required),lastname:n.Z_().nullable(),password:n.Z_().min(8,a.I0.minLength).matches(/[a-z]/,"components.Input.error.contain.lowercase").matches(/[A-Z]/,"components.Input.error.contain.uppercase").matches(/\d/,"components.Input.error.contain.number").required(a.I0.required),email:n.Z_().email(a.I0.email).strict().lowercase(a.I0.lowercase).required(a.I0.required),confirmPassword:n.Z_().oneOf([n.iH("password"),null],"components.Input.error.password.noMatch").required(a.I0.required)}),inputsPrefix:""},"reset-password":{Component:xe,endPoint:"reset-password",fieldsToDisable:[],fieldsToOmit:["confirmPassword"],schema:n.Ry().shape({password:n.Z_().min(8,a.I0.minLength).matches(/[a-z]/,"components.Input.error.contain.lowercase").matches(/[A-Z]/,"components.Input.error.contain.uppercase").matches(/\d/,"components.Input.error.contain.number").required(a.I0.required),confirmPassword:n.Z_().oneOf([n.iH("password"),null],"components.Input.error.password.noMatch").required(a.I0.required)})}};var be=s=>s,Be=t(97889),We=t(3040),Ke=t.n(We);const Oe={formErrors:{},modifiedData:{},requestError:null},Fe=(s,E)=>(0,Be.ZP)(s,r=>{switch(E.type){case"ON_CHANGE":{Ke()(r.modifiedData,E.keys.split("."),E.value);break}case"RESET_PROPS":return Oe;case"SET_DATA":{r.modifiedData=E.data;break}case"SET_ERRORS":{r.formErrors=E.errors;break}case"SET_REQUEST_ERROR":{r.requestError={errorMessage:E.errorMessage,errorStatus:E.errorStatus};break}default:return r}}),ge=({hasAdmin:s,setHasAdmin:E})=>{const{push:r,location:{search:$}}=(0,j.k6)(),{changeLocale:U}=(0,H.Z)(),{setSkipped:Y}=(0,a.c1)(),{trackUsage:g}=(0,a.rS)(),{params:{authType:d}}=(0,j.$B)("/auth/:authType"),x=(0,a.aM)(),W=(0,G.c)(J,async()=>(await t.e(2395).then(t.bind(t,82395))).LoginEE),K=(0,G.c)(Ce,async()=>(await t.e(8276).then(t.bind(t,18276))).FORMS,{combine(m,f){return{...m,...f}},defaultValue:Ce}),[{formErrors:N,modifiedData:Ee,requestError:oe},_]=(0,e.useReducer)(Fe,Oe,be),o=w.default.CancelToken.source(),{endPoint:he,fieldsToDisable:Pe,fieldsToOmit:le,inputsPrefix:k,schema:ve,...C}=K?.[d]??{};(0,e.useEffect)(()=>()=>{o.cancel("Component unmounted")},[]);const{post:l}=(0,a.kY)();(0,e.useEffect)(()=>{_({type:"RESET_PROPS"})},[d]);const p=({target:{name:m,value:f}})=>{_({type:"ON_CHANGE",keys:m,value:f})},Z=async(m,{setSubmitting:f,setErrors:D})=>{f(!0);const F=z()(m,le),c=`/admin/${he}`;d==="login"&&await ze(m,c,{setSubmitting:f,setErrors:D}),(d==="register"||d==="register-admin")&&await je(m,c,{setSubmitting:f,setErrors:D}),d==="forgot-password"&&await O(F,c,{setSubmitting:f,setErrors:D}),d==="reset-password"&&await He(F,c,{setSubmitting:f,setErrors:D})},O=async(m,f,{setSubmitting:D,setErrors:F})=>{try{await l(f,m,{cancelToken:o.token}),r("/auth/forgot-password-success")}catch(c){console.error(c),F({errorMessage:"notification.error"})}finally{D(!1)}},ze=async(m,f,{setSubmitting:D,setErrors:F})=>{try{const{data:{data:{token:c,user:h}}}=await l(f,z()(m,le),{cancelToken:o.token});h.preferedLanguage&&U(h.preferedLanguage),a.I8.setToken(c,m.rememberMe),a.I8.setUserInfo(h,m.rememberMe),Ze()}catch(c){if(c.response){const h=b()(c,["response","data","error","message"],"Something went wrong");if(y()(h).toLowerCase()==="usernotactive"){r("/auth/oops"),_({type:"RESET_PROPS"});return}F({errorMessage:h})}}finally{D(!1)}},je=async(m,f,{setSubmitting:D,setErrors:F})=>{try{g("willCreateFirstAdmin");const{data:{data:{token:c,user:h}}}=await l(f,z()(m,le),{cancelToken:o.token});a.I8.setToken(c,!1),a.I8.setUserInfo(h,!1),D(!1),E(!0);const{roles:ee}=h;if(ee&&ee.find(({code:Ne})=>Ne==="strapi-super-admin")&&(ae.ZP.setSkipped(!1),Y(!1),g("didLaunchGuidedtour")),d==="register"&&m.userInfo.news===!0||d==="register-admin"&&m.news===!0){r({pathname:"/usecase",search:`?hasAdmin=${s}`});return}Ze()}catch(c){if(g("didNotCreateFirstAdmin"),c.response){const{data:h}=c.response,ee=(0,se.I)(h);F({apiErrors:ee})}}},He=async(m,f,{setErrors:D,setSubmitting:F})=>{try{const{data:{data:{token:c,user:h}}}=await l(f,{...m,resetPasswordToken:x.get("code")},{cancelToken:o.token});a.I8.setToken(c,!1),a.I8.setUserInfo(h,!1),r("/")}catch(c){if(c.response){const h=b()(c,["response","data","message"],"Something went wrong"),ee=b()(c,["response","data","statusCode"],400);_({type:"SET_REQUEST_ERROR",errorMessage:h,errorStatus:ee}),D({errorMessage:h})}}finally{F(!1)}},Ze=()=>{if(d==="login"){const m=x.get("redirectTo"),f=m?decodeURIComponent(m):"/";r(f)}else r("/")};if(!K[d]||s&&d==="register-admin"||a.I8.getToken())return e.createElement(j.l_,{to:"/"});if(!s&&d!=="register-admin")return e.createElement(j.l_,{to:{pathname:"/auth/register-admin",search:$}});if(W&&(K.login.Component=W),!W)return null;const{Component:Ve}=K?.[d]??{};return e.createElement(Ve,{...C,authType:d,fieldsToDisable:Pe,formErrors:N,inputsPrefix:k,modifiedData:Ee,onChange:p,onSubmit:Z,requestError:oe,schema:ve})};ge.defaultProps={hasAdmin:!1},ge.propTypes={hasAdmin:u().bool,setHasAdmin:u().func.isRequired}},27649:function(Q,M,t){t.d(M,{o:function(){return y}});var e=t(74512),a=t(8471),w=t(72850);const P=(0,a.ZP)(w.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,y=({labelledBy:T="main-content-title",...b})=>(0,e.jsx)(P,{"aria-labelledby":T,as:"main",id:"main-content",tabIndex:-1,...b})}}]);
