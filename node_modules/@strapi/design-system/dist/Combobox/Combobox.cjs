"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const o=require("react/jsx-runtime"),$e=require("react"),M=require("@strapi/icons"),n=require("@strapi/ui-primitives"),je=require("styled-components"),Ie=require("../helpers/strings.cjs"),ye=require("../hooks/useComposeRefs.cjs"),I=require("../hooks/useControllableState.cjs"),y=require("../hooks/useId.cjs"),we=require("../hooks/useIntersection.cjs"),Re=require("../Loader/Loader.cjs"),N=require("../themes/utils.cjs"),x=require("../Flex/Flex.cjs"),w=require("../Box/Box.cjs"),p=require("../Typography/Typography.cjs"),qe=require("../Field/Field.cjs"),Te=require("../Field/FieldLabel.cjs"),Fe=require("../Field/FieldHint.cjs"),ve=require("../Field/FieldError.cjs"),ke=e=>e&&e.__esModule?e:{default:e};function Oe(e){if(e&&e.__esModule)return e;const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const s in e)if(s!=="default"){const l=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,l.get?l:{enumerable:!0,get:()=>e[s]})}}return r.default=e,Object.freeze(r)}const u=Oe($e),a=ke(je),H=u.forwardRef(({allowCustomValue:e,autocomplete:r,children:s,className:l,clearLabel:d="clear",creatable:i=!1,createMessage:g=b=>`Create "${b}"`,defaultFilterValue:m,defaultTextValue:h,defaultOpen:W=!1,open:U,onOpenChange:A,disabled:C=!1,error:R,filterValue:G,hasMoreItems:J=!1,id:q,isPrintableCharacter:K,loading:$=!1,loadingMessage:Q="Loading content...",noOptionsMessage:X=()=>"No results found",onChange:T,onClear:j,onCreateOption:F,onFilterValueChange:Y,onInputChange:v,onTextValueChange:Z,onLoadMore:k,placeholder:ee="Select or enter a value",required:oe=!1,size:re="M",startIcon:O,textValue:te,value:V,...ne},se)=>{const[b,le]=I.useControllableState({prop:U,defaultProp:W,onChange:A}),[c,S]=I.useControllableState({prop:te,defaultProp:e&&!h?V:h,onChange:Z}),[ie,B]=I.useControllableState({prop:G,defaultProp:m,onChange:Y}),P=u.useRef(null),_=u.useRef(null),ae=ye.useComposedRefs(_,se),de=u.useRef(null),ce=t=>{j&&!C&&(S(""),B(""),j(t),_.current.focus())},ue=t=>{le(t)},he=t=>{S(t)},pe=t=>{B(t)},be=t=>{v&&v(t)},xe=t=>{T&&T(t)},fe=t=>{k&&J&&!$&&k(t)},z=()=>{F&&c&&F(c)},E=y.useId(q),ge=y.useId(),D=`intersection-${Ie.stripReactIdOfColon(ge)}`;we.useIntersection(P,fe,{selectorToWatch:`#${D}`,skipWhen:!b});const me=`${E}-hint`,Ce=`${E}-error`;return o.jsxs(n.Combobox.Root,{autocomplete:r||(i?"list":"both"),onOpenChange:ue,open:b,onTextValueChange:he,textValue:c,allowCustomValue:i||e,disabled:C,required:oe,value:V,onValueChange:xe,filterValue:ie,onFilterValueChange:pe,isPrintableCharacter:K,children:[o.jsxs(Be,{$hasError:!!R,$size:re,className:l,children:[o.jsxs(x.Flex,{flex:"1",as:"span",gap:3,children:[O?o.jsx(w.Box,{as:"span","aria-hidden":!0,children:O}):null,o.jsx(Pe,{placeholder:ee,id:q,"aria-invalid":!!R,"aria-describedby":`${me} ${Ce}`,onChange:be,ref:ae,...ne})]}),o.jsxs(x.Flex,{as:"span",gap:3,children:[c&&j?o.jsx(Se,{as:"button",hasRadius:!0,background:"transparent",type:"button",onClick:ce,"aria-disabled":C,"aria-label":d,title:d,ref:de,children:o.jsx(M.Cross,{})}):null,o.jsx(_e,{children:o.jsx(M.CarretDown,{})})]})]}),o.jsx(n.Combobox.Portal,{children:o.jsx(ze,{sideOffset:4,children:o.jsxs(Ee,{ref:P,children:[s,i?o.jsx(n.Combobox.CreateItem,{onPointerUp:z,onClick:z,asChild:!0,children:o.jsx(f,{children:o.jsx(p.Typography,{children:g(c??"")})})}):null,!i&&!$?o.jsx(n.Combobox.NoValueFound,{asChild:!0,children:o.jsx(f,{$hasHover:!1,children:o.jsx(p.Typography,{children:X(c??"")})})}):null,$?o.jsx(x.Flex,{justifyContent:"center",alignItems:"center",paddingTop:2,paddingBottom:2,children:o.jsx(Re.Loader,{small:!0,children:Q})}):null,o.jsx(w.Box,{id:D,width:"100%",height:"1px"})]})})})]})}),L=u.forwardRef(({error:e,hint:r,id:s,label:l,labelAction:d,required:i=!1,...g},m)=>{const h=y.useId(s);return o.jsx(qe.Field,{hint:r,error:e,id:h,required:i,children:o.jsxs(x.Flex,{direction:"column",alignItems:"stretch",gap:1,children:[l?o.jsx(Te.FieldLabel,{action:d,children:l}):null,o.jsx(H,{ref:m,id:h,error:e,required:i,...g}),o.jsx(Fe.FieldHint,{}),o.jsx(ve.FieldError,{})]})})}),Ve=e=>o.jsx(L,{...e,creatable:!0}),Se=a.default(w.Box)`
  border: none;

  svg {
    height: ${11/16}rem;
    width: ${11/16}rem;
  }

  svg path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,Be=a.default(n.Combobox.Trigger)`
  position: relative;
  border: 1px solid ${({theme:e,$hasError:r})=>r?e.colors.danger600:e.colors.neutral200};
  padding-right: ${({theme:e})=>e.spaces[3]};
  padding-left: ${({theme:e})=>e.spaces[3]};
  border-radius: ${({theme:e})=>e.borderRadius};
  background: ${({theme:e})=>e.colors.neutral0};
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: ${({theme:e})=>e.spaces[4]};
  min-height: ${({theme:e,$size:r})=>N.getThemeSize("input")({theme:e,size:r})};

  &[data-disabled] {
    color: ${({theme:e})=>e.colors.neutral600};
    background: ${({theme:e})=>e.colors.neutral150};
    cursor: not-allowed;
  }

  /* Required to ensure the below inputFocusStyles are adhered too */
  &:focus-visible {
    outline: none;
  }

  ${({theme:e,$hasError:r})=>N.inputFocusStyle()({theme:e,hasError:r})};
`,Pe=a.default(n.Combobox.TextInput)`
  width: 100%;
  font-size: ${14/16}rem;
  color: ${({theme:e})=>e.colors.neutral800};
  padding: 0;
  border: none;
  background-color: transparent;

  &:focus-visible {
    outline: none;
  }

  &[aria-disabled='true'] {
    cursor: inherit;
  }
`,_e=a.default(n.Combobox.Icon)`
  & > svg {
    width: ${6/16}rem;

    & > path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }

  &[aria-disabled='true'] {
    cursor: inherit;
  }
`,ze=a.default(n.Combobox.Content)`
  background: ${({theme:e})=>e.colors.neutral0};
  box-shadow: ${({theme:e})=>e.shadows.filterShadow};
  border: 1px solid ${({theme:e})=>e.colors.neutral150};
  border-radius: ${({theme:e})=>e.borderRadius};
  width: var(--radix-combobox-trigger-width);
  /* This is from the design-system figma file. */
  max-height: 15rem;
  z-index: ${({theme:e})=>e.zIndices[1]};
`,Ee=a.default(n.Combobox.Viewport)`
  padding: ${({theme:e})=>e.spaces[1]};
`,De=u.forwardRef(({children:e,value:r,disabled:s,textValue:l,...d},i)=>o.jsx(n.Combobox.ComboboxItem,{asChild:!0,value:r,disabled:s,textValue:l,children:o.jsx(f,{ref:i,...d,children:o.jsx(n.Combobox.ItemText,{asChild:!0,children:o.jsx(p.Typography,{children:e})})})})),f=a.default.div`
  width: 100%;
  border: none;
  text-align: left;
  outline-offset: -3px;
  padding: ${({theme:e})=>e.spaces[2]} ${({theme:e})=>e.spaces[4]};
  background-color: ${({theme:e})=>e.colors.neutral0};
  border-radius: ${({theme:e})=>e.borderRadius};
  user-select: none;

  &[data-state='checked'] {
    background-color: ${({theme:e})=>e.colors.primary100};

    ${p.Typography} {
      color: ${({theme:e})=>e.colors.primary600};
      font-weight: bold;
    }
  }

  &:hover,
  &[data-highlighted] {
    outline: none;
    background-color: ${({theme:e,$hasHover:r=!0})=>r?e.colors.primary100:e.colors.neutral0};
  }

  &[data-highlighted] {
    ${p.Typography} {
      color: ${({theme:e})=>e.colors.primary600};
      font-weight: bold;
    }
  }
`;exports.Combobox=L;exports.ComboboxInput=H;exports.CreatableCombobox=Ve;exports.Option=De;exports.OptionBox=f;
